<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Salary List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/style.css" rel="stylesheet">
</head>
<body>
  <%- include('partials/header') %>
  <div class="container mt-4">
    <h3>Salary â€” <%= month.monthName %> <%= month.year %></h3>
    <a href="/salary/create/<%= month._id %>" class="btn btn-primary mb-2">+ Add Salary</a>

    <table class="table">
      <thead>
        <tr><th>Employee</th><th>Monthly</th><th>Present</th><th>Leave</th><th>OT</th><th>Advance</th><th>Deductions</th><th>Net</th><th>Actions</th></tr>
      </thead>
      <tbody>
        <% salaries.forEach(s => { %>
          <tr>
            <td><%= s.employeeId.name %></td>
            <td>Rs. <%= s.monthlySalary %></td>
            <td><%= s.presentDays %></td>
            <td><%= s.leaveDays %></td>
            <td>Rs. <%= s.otAmount %></td>
            <td>Rs. <%= s.advance %></td>
            <td>Rs. <%= s.totalDeductions %></td>
            <td><strong>Rs. <%= s.netSalary %></strong></td>
            <td>
              <a href="/salary/edit/<%= s._id %>" class="btn btn-sm btn-secondary">Edit</a>
              <a href="/salary/slip/<%= s._id %>" class="btn btn-sm btn-info">Slip</a>
              <a href="/salary/slip/<%= s._id %>/pdf" class="btn btn-sm btn-success">PDF</a>
              <a href="/salary/slip/<%= s._id %>/email" class="btn btn-sm btn-warning">Email Slip</a>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</body>
</html>
